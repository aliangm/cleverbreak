<!--
  Generated template for the TripsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
<ion-row class="tabs_container">
    <ion-col id="bookings" text-center no-padding class="bookings" (click)="onClickBookings()" style="border-bottom: 1px solid #47bc00">
        Bookings
    </ion-col>
    <ion-col id="requests" text-center no-padding class="requests" (click)="onClickRequests()">
        Requests
    </ion-col>
    <ng-container *ngIf="showManageBooking == true">
        <ion-col id="manage" text-center class="manage" no-padding>
            <ion-row no-padding class="manage_container" (click)="onClickManageBookings()">
                <ion-col no-padding col-12>
                    Manage
                </ion-col>
                <ion-col no-padding col-12>
                    Bookings
                </ion-col>
            </ion-row>
        </ion-col>
    </ng-container>
</ion-row>
</ion-header>
<ion-content>
    <!--Bookings Page-->
    <ng-container *ngIf="pageType == 0">
        <ion-list>
            <ng-container *ngFor="let booking of active_bookings">
                <!--Guide-->
                <ng-container *ngIf="booking.booking_type == 1"> 
                    <ion-row >
                        <ion-col col-5 class="img_container" (click)="onClickViewGuide(booking.guide)">
                            <img src="{{appInfo.common.url}}images/users/{{booking.guide.user.picture}}" class="tour_img icon">
                        </ion-col>
                        <ion-col col-7 class="booking_content">
                            <ion-row class="tour_title">
                                <ion-col>
                                    {{booking.guide.user.firstname}} {{booking.guide.user.lastname}}
                                </ion-col>
                            </ion-row>
                            <ion-row class="tour_location">
                                <ion-col>
                                    <i class="material-icons location_icon">
                                        location_on
                                    </i>
                                    {{booking.guide.locations}}
                                </ion-col>
                            </ion-row>
                            <ion-row class="tour_date">
                                <ion-col>
                                    <i class="material-icons date_icon">
                                        date_range
                                    </i>
                                    {{booking.date_from}}
                                </ion-col>
                            </ion-row>
                            <ng-container *ngIf="booking.bookingStatus == 0">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="pending">
                                            Pending
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                            <ng-container *ngIf="booking.bookingStatus == 1">
                                <ng-container *ngIf="booking.cancelled == 0">
                                    <ion-row class="tour_status">
                                        <ion-col>
                                            <button ion-button class="confirmed" (click)="confirmedBooking(active_bookings.indexOf(booking))">
                                                Confirmed
                                            </button>
                                        </ion-col>
                                    </ion-row>
                                </ng-container>
                                <ng-container *ngIf="booking.cancelled == 1">
                                    <ion-row class="tour_status">
                                        <ion-col>
                                            <button ion-button class="pending">
                                                Cancelled
                                            </button>
                                        </ion-col>
                                    </ion-row>
                                </ng-container>
                            </ng-container>
                            <ng-container *ngIf="booking.bookingStatus == 2">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="pending">
                                            Decline
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                        </ion-col>
                    </ion-row>
                </ng-container>
                <ng-container *ngIf="booking.booking_type == 2">
                    <ion-row class="tour_container">
                        <ion-col col-5 class="img_container">
                            <img src="{{appInfo.common.url}}images/tours/{{booking.tours.photo}}" class="tour_img icon">
                        </ion-col>
                        <ion-col col-7 class="booking_content">
                            <ion-row class="tour_title">
                                <ion-col>
                                    {{booking.tours.title}}
                                </ion-col>
                            </ion-row>
                            <ion-row class="tour_location">
                                <ion-col>
                                    <i class="material-icons location_icon">
                                        location_on
                                    </i>
                                    {{booking.tours.locations}}
                                </ion-col>
                            </ion-row>
                            <ion-row class="tour_date">
                                <ion-col>
                                    <i class="material-icons date_icon">
                                        date_range
                                    </i>
                                    {{booking.date_from}}
                                </ion-col>
                            </ion-row>
                            <ng-container *ngIf="booking.bookingStatus == 0">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="pending">
                                            Pending
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                            <ng-container *ngIf="booking.bookingStatus == 1">
                                <ng-container *ngIf="booking.cancelled == 0">
                                    <ion-row class="tour_status">
                                        <ion-col>
                                            <button ion-button class="confirmed" (click)="confirmedBooking(active_bookings.indexOf(booking))">
                                                Confirmed
                                            </button>
                                        </ion-col>
                                    </ion-row>
                                </ng-container>
                                <ng-container *ngIf="booking.cancelled == 1">
                                    <ion-row class="tour_status">
                                        <ion-col>
                                            <button ion-button class="pending">
                                                Cancelled
                                            </button>
                                        </ion-col>
                                    </ion-row>
                                </ng-container>
                            </ng-container>
                            <ng-container *ngIf="booking.bookingStatus == 2">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="pending">
                                            Decline
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                        </ion-col>
                    </ion-row>
                </ng-container>
            </ng-container>
        </ion-list>
    </ng-container>

    <!--Requests Page-->
    <ng-container *ngIf="pageType == 1">
        <ion-list>
            <ion-row>
                <ion-col col-12 text-right>
                    <button ion-button class="btn_request" (click)="onClickNewRequest()">
                        + New Request
                    </button>
                </ion-col>
            </ion-row>
            <ion-row>
               <ion-col col-3>
                   Title
               </ion-col> 
               <ion-col col-2>
                   Date
               </ion-col>
               <ion-col col-2>
                   Time
               </ion-col>
               <ion-col col-2>
                   Price
               </ion-col>
            </ion-row>
            <ion-row *ngFor="let request of requests" class="request_container">
                <ion-col col-3>
                    {{request.title}}
                </ion-col> 
                <ion-col col-2>
                    {{request.dateTo}}
                </ion-col>
                <ion-col col-2>
                    {{request.timeFrom}} - {{request.timeTo}}
                </ion-col>
                <ion-col col-2>
                    {{request.price}}
                </ion-col>
                <ion-col col-3 class="btn_container">
                    <ion-row>
                        <ion-col no-padding>
                            <button ion-button class="btn_right" (click)="onClickEditRequest(requests.indexOf(request))">Edit</button>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col no-padding>
                            <button ion-button class="btn_right">View Replies</button>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col no-padding>
                            <button ion-button class="btn_right" (click)="onClickDeleteRequest(requests.indexOf(request))">Delete</button>
                        </ion-col>
                    </ion-row>
                </ion-col>
            </ion-row>
        </ion-list>
    </ng-container>
    <!--Mange Booking-->
    <ng-container *ngIf="pageType == 2">
        <ion-list>
            <ion-row *ngFor="let booking of manage_bookings">
                <!--Guide-->
                <ng-container *ngIf="booking.booking_type == 1"> 
                    <ion-col col-5 class="img_container">
                        <img src="{{appInfo.common.url}}images/users/thumbnail/{{booking.picture}}" class="tour_img icon" >
                    </ion-col>
                    <ion-col col-7 class="booking_content">
                        <ion-row class="tour_title">
                            <ion-col>
                                {{booking.firstname}} <ng-container *ngIf="booking?.lastname">{{booking.lastname}}</ng-container>
                            </ion-col>
                        </ion-row>   
                        <ion-row class="tour_date">
                            <ion-col>
                                <i class="material-icons date_icon">
                                    date_range
                                </i>
                                {{booking.date_to}}
                            </ion-col>
                        </ion-row>
                        <ion-row class="tour_location">
                            <ion-col>
                                <i class="material-icons location_icon">
                                    access_time
                                </i>
                                {{booking.time}}
                            </ion-col>
                            </ion-row>
                        <ng-container *ngIf="booking.bookingStatus == 0">
                            <ion-row class="tour_status">
                                <ion-col>
                                    <button ion-button class="pending" (click)="onClickViewRequest(booking)">
                                        View Request
                                    </button>
                                </ion-col>
                            </ion-row>
                        </ng-container>
                        <ng-container *ngIf="booking.bookingStatus == 1">
                            <ng-container *ngIf="booking.cancelled == 0">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="confirmed" (click)="confirmedGuide(manage_bookings.indexOf(booking))">
                                            Confirmed
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                            <ng-container *ngIf="booking.cancelled == 1">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="pending">
                                            Cancelled
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                        </ng-container>
                        <ng-container *ngIf="booking.bookingStatus == 2">
                            <ion-row class="tour_status">
                                <ion-col>
                                    <button ion-button class="pending">
                                        Decline
                                    </button>
                                </ion-col>
                            </ion-row>
                        </ng-container>
                    </ion-col>
                </ng-container>
                <ng-container *ngIf="booking.booking_type == 2">
                    <ion-row class="tour_container">
                        <ion-col col-5 class="img_container">
                            <img src="{{appInfo.common.url}}images/tours/{{booking.photo}}" class="tour_img icon">
                        </ion-col>
                        <ion-col col-7 class="booking_content">
                            <ion-row class="tour_title">
                                <ion-col>
                                    {{booking.title}}
                                </ion-col>
                            </ion-row>
                            <ion-row class="tour_location">
                                <ion-col>
                                    <i class="material-icons location_icon">
                                        location_on
                                    </i>
                                    {{booking.locations}}
                                </ion-col>
                            </ion-row>
                            <ion-row class="tour_date">
                                <ion-col>
                                    <i class="material-icons date_icon">
                                        date_range
                                    </i>
                                    {{booking.date_from}}
                                </ion-col>
                            </ion-row>
                            <ng-container *ngIf="booking.bookingStatus == 0">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="pending" (click)="onClickViewRequest(booking)">
                                            View Request
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                            <ng-container *ngIf="booking.bookingStatus == 1">
                                <ng-container *ngIf="booking.cancelled == 0">
                                    <ion-row class="tour_status">
                                        <ion-col>
                                            <button ion-button class="confirmed" (click)="onClickConfirmedTourRequest(manage_bookings.indexOf(booking))">
                                                Confirmed
                                            </button>
                                        </ion-col>
                                    </ion-row>
                                </ng-container>
                                <ng-container *ngIf="booking.cancelled == 1">
                                    <ion-row class="tour_status">
                                        <ion-col>
                                            <button ion-button class="pending">
                                                Cancelled
                                            </button>
                                        </ion-col>
                                    </ion-row>
                                </ng-container>
                            </ng-container>
                            <ng-container *ngIf="booking.bookingStatus == 2">
                                <ion-row class="tour_status">
                                    <ion-col>
                                        <button ion-button class="pending">
                                            Decline
                                        </button>
                                    </ion-col>
                                </ion-row>
                            </ng-container>
                        </ion-col>
                    </ion-row>
                </ng-container>
            </ion-row>
        </ion-list>
    </ng-container>
</ion-content>